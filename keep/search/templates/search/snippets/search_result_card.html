{% extends 'eultheme/snippets/card_with_preview.html' %}
{% load audio_extras %} {% load search_tags %}
{# public-facing search result card; currently audio-only #}

{% block result-header %}
    <h3><a href="{% url 'audio:view' r.pid %}">{{ r.title }}</a>
    <h4>{{ r.collection_source_id }}: {{ r.collection_label }}</h4>
    {# TODO: use r.collection_id to link to collection page once we have one #}
{% endblock %}

{% block result-info %}
    {% if r.score %}
    {# display numerical score in debug mode #}
    {% if debug %}<p>{{ r.score }}</p>{% endif %}
    <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="{{ r.score }}" aria-valuemin="0" aria-valuemax="1.5" style="width:{% widthratio r.score 1 90 %}%"> </div>

    </div>
    {% endif %}

    {# TODO: *only* if perms can edit audio #}
    <div class="pull-right">
        <a href="{% url 'audio:edit' r.pid %}"><span class="glyphicon glyphicon-edit"></span></a>
    </div>
{% endblock %}

{% block result-content %}

    {% if r.date_issued or r.date_created %}
      <p><b>Date{% if r.date_issued and r.date_created %}s{% endif %}:</b> {{ r.date_issued }}{% if r.date_issued and r.date_created %}, {% endif %}
        {{ r.date_created }}</p>
    {% endif %}

    {# display part note if any (side A/B, etc) #}
    {% if r.part %}<p>{{ r.part }}</p>{% endif %}

    {% if r.duration %}<p>{{ r.duration|natural_seconds }}</p>{% endif %}
    {# display short-form ARK if possible; fall-back to pid display #}
    <p>{% firstof r.ark_uri|ark_id r.pid %}</p>
{% endblock %}

{% block result-preview %}
    <h3>{{ r.title }}</a></h3>
    <p class="centered">
        <a class="btn btn-primary" href="#" >Open Resource</a>
    </p>
{% endblock %}

